<Window x:Class="MSNClient.GroupChatWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Height="480" Width="580" MinHeight="350" MinWidth="460"
        Background="#EEF4FB" FontFamily="Tahoma">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="110"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource MSNHeaderBrush}" Padding="10,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="ðŸ‘¥" FontSize="22" VerticalAlignment="Center" Margin="0,0,8,0"/>
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                    <TextBlock x:Name="GroupNameText" FontSize="13" FontWeight="Bold" Foreground="White"/>
                    <TextBlock x:Name="GroupDescText" FontSize="10" Foreground="#DDEEFF" FontStyle="Italic"/>
                </StackPanel>
                <Button Style="{StaticResource MSNBtn}" Margin="2,0" Padding="5,2" Click="SendFile_Click">
                    <StackPanel><TextBlock Text="ðŸ“Ž" FontSize="14" HorizontalAlignment="Center"/>
                    <TextBlock Text="Send File" FontSize="8" HorizontalAlignment="Center"/></StackPanel>
                </Button>
                <Button Style="{StaticResource MSNBtn}" Margin="2,0" Padding="5,2" Click="Toolbar_Nudge">
                    <StackPanel><TextBlock Text="ðŸ‘Š" FontSize="14" HorizontalAlignment="Center"/>
                    <TextBlock Text="Nudge" FontSize="8" HorizontalAlignment="Center"/></StackPanel>
                </Button>
                <Button Grid.Column="2" Style="{StaticResource MSNBtn}" Content="âž• Invite"
                        Click="InviteToGroup_Click" Background="Transparent" Foreground="White"
                        BorderBrush="#8899BB"/>
            </Grid>
        </Border>

        <!-- Main area: messages + member list -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="140"/>
            </Grid.ColumnDefinitions>

            <!-- Messages -->
            <ScrollViewer x:Name="ChatScroll" VerticalScrollBarVisibility="Auto"
                          Background="White" BorderBrush="#8CB4E0" BorderThickness="1,0,0,1">
                <StackPanel x:Name="MessagesPanel" Margin="6,4"/>
            </ScrollViewer>

            <!-- Members list -->
            <Border Grid.Column="1" Background="#F0F6FC" BorderBrush="#8CB4E0" BorderThickness="0,0,1,1">
                <StackPanel>
                    <TextBlock Text="Participants" FontSize="10" FontWeight="Bold" Foreground="#003399"
                               Background="#D8E8F8" Padding="6,4"/>
                    <ListBox x:Name="MembersList" BorderThickness="0" Background="Transparent"
                             FontSize="10" FontFamily="Tahoma"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Typing indicator / warning -->
        <Border Grid.Row="2" Background="#FFFBE6" BorderBrush="#FFCC00" BorderThickness="0,1,0,1" Padding="6,3">
            <StackPanel>
                <TextBlock x:Name="TypingText" Text="" FontSize="10" Foreground="#666666" FontStyle="Italic"/>
                <TextBlock Text="âš ï¸  Never share your password or credit card in a group chat." FontSize="10" Foreground="#666666"/>
            </StackPanel>
        </Border>

        <!-- Format bar -->
        <Border Grid.Row="3" Background="#E8F0F8" BorderBrush="#8CB4E0" BorderThickness="0,1,0,1" Padding="4,2">
            <StackPanel Orientation="Horizontal">
                <ComboBox x:Name="FontCombo" Width="95" Height="20" FontSize="10" SelectionChanged="Font_Changed"/>
                <ComboBox x:Name="SizeCombo" Width="38" Height="20" FontSize="10" Margin="2,0" SelectionChanged="Size_Changed"/>
                <Button Style="{StaticResource MSNBtn}" Margin="1,0" Padding="3,1" FontWeight="Bold" Content="B" Click="Bold_Click"/>
                <Button Style="{StaticResource MSNBtn}" Margin="1,0" Padding="3,1" FontStyle="Italic" Content="I" Click="Italic_Click"/>
                <Button Style="{StaticResource MSNBtn}" Margin="1,0" Padding="3,1" Content="U" Click="Underline_Click"/>
                <Separator Margin="3,0"/>
                <Button Style="{StaticResource MSNBtn}" Margin="1,0" Padding="4,1" Content="ðŸ˜Š" Click="Emoticon_Click"/>
                <Button Style="{StaticResource MSNBtn}" Margin="1,0" Padding="4,1" Content="ðŸ·ï¸" Click="Sticker_Click" ToolTip="Stickers"/>
                <Button Style="{StaticResource MSNBtn}" Margin="1,0" Padding="4,1" Content="A" Foreground="Blue" Click="Color_Click"/>
            </StackPanel>
        </Border>

        <!-- Input -->
        <RichTextBox Grid.Row="4" x:Name="InputBox" Background="White" Padding="4"
                     FontFamily="Tahoma" FontSize="11"
                     BorderBrush="#8CB4E0" BorderThickness="1,1,1,0"
                     AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                     PreviewKeyDown="Input_KeyDown" TextChanged="Input_TextChanged"/>

        <!-- Send bar -->
        <Border Grid.Row="5" Background="#E0ECFA" Padding="4,3">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="SendStatus" FontSize="9" Foreground="#888" VerticalAlignment="Center" Margin="4,0" Text="Press Enter to send Â· Shift+Enter for new line"/>
                <Button Grid.Column="1" Style="{StaticResource MSNBtnPrimary}" Content="Send to Group"
                        Padding="14,3" Click="Send_Click" FontWeight="Bold"/>
            </Grid>
        </Border>
    </Grid>
</Window>
