<Window x:Class="MSNClient.GarticPhoneWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ðŸ“ž Gartic Phone" Height="700" Width="900"
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="#F0E8F8">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>   <!-- top bar -->
            <RowDefinition Height="*"/>      <!-- main area -->
            <RowDefinition Height="Auto"/>   <!-- bottom controls -->
        </Grid.RowDefinitions>

        <!-- Top Bar -->
        <Border Grid.Row="0" Background="#7B2FBE" Padding="14,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock x:Name="PhaseText" Text="Waiting for players..." FontSize="16"
                               FontWeight="Bold" Foreground="White"/>
                </StackPanel>

                <TextBlock Grid.Column="1" x:Name="TimerText" Text="" FontSize="28"
                           FontWeight="Bold" Foreground="#FFD700" HorizontalAlignment="Center" VerticalAlignment="Center"/>

                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <TextBlock x:Name="PhaseProgressText" Text="" FontSize="12" Foreground="#DDC8FF"
                               VerticalAlignment="Center" Margin="0,0,12,0"/>
                    <Button x:Name="LeaveBtn" Content="âœ• Leave" Padding="10,4"
                            Style="{StaticResource MSNBtn}" Click="Leave_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Grid.Row="1">
            <!-- Lobby / Waiting Panel -->
            <Border x:Name="LobbyPanel" Background="White" Margin="20" CornerRadius="8" Padding="20">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock x:Name="LobbyTitle" Text="ðŸ“ž Gartic Phone Lobby" FontSize="20"
                               FontWeight="Bold" Foreground="#4A148C" TextAlignment="Center" Margin="0,0,0,12"/>
                    <TextBlock x:Name="LobbyInfo" Text="" FontSize="13" Foreground="#666"
                               TextAlignment="Center" Margin="0,0,0,12"/>
                    <StackPanel x:Name="PlayerListPanel" Margin="0,0,0,16"/>
                    <Button x:Name="StartBtn" Content="â–¶ Start Game" Padding="20,8" FontSize="14"
                            Style="{StaticResource MSNBtnPrimary}" Click="Start_Click"
                            HorizontalAlignment="Center" Visibility="Collapsed"/>
                </StackPanel>
            </Border>

            <!-- Write Phase Panel -->
            <Border x:Name="WritePanel" Background="White" Margin="20" CornerRadius="8" Padding="30" Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" MaxWidth="500">
                    <TextBlock Text="âœï¸" FontSize="48" TextAlignment="Center" Margin="0,0,0,8"/>
                    <TextBlock Text="Write a phrase for someone to draw!" FontSize="18" FontWeight="Bold"
                               Foreground="#4A148C" TextAlignment="Center" Margin="0,0,0,4"/>
                    <TextBlock Text="Be creative! Something like &quot;a cat riding a skateboard on the moon&quot;"
                               FontSize="12" Foreground="#888" TextAlignment="Center" Margin="0,0,0,16"
                               TextWrapping="Wrap"/>
                    <TextBox x:Name="PhraseBox" Height="40" FontSize="16"
                             Style="{StaticResource TextBoxStyle}" Margin="0,0,0,12"
                             MaxLength="100"/>
                    <Button x:Name="SubmitPhraseBtn" Content="âœ“ Submit Phrase" Padding="20,8" FontSize="14"
                            Style="{StaticResource MSNBtnPrimary}" Click="SubmitPhrase_Click"
                            HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Draw Phase Panel -->
            <Border x:Name="DrawPanel" Background="White" Margin="20" CornerRadius="8" Padding="16" Visibility="Collapsed">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Prompt -->
                    <Border Grid.Row="0" Background="#F3E5F5" CornerRadius="6" Padding="12,8" Margin="0,0,0,10">
                        <TextBlock x:Name="DrawPromptText" Text="" FontSize="16" FontWeight="Bold" 
                                   Foreground="#4A148C" TextAlignment="Center" TextWrapping="Wrap"/>
                    </Border>

                    <!-- Canvas -->
                    <Border Grid.Row="1" BorderBrush="#B088D8" BorderThickness="2" CornerRadius="4" ClipToBounds="True">
                        <Canvas x:Name="DrawingCanvas" Background="White"
                                MouseLeftButtonDown="Canvas_MouseDown"
                                MouseMove="Canvas_MouseMove"
                                MouseLeftButtonUp="Canvas_MouseUp"/>
                    </Border>

                    <!-- Drawing Tools -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,0">
                        <StackPanel x:Name="ColorPalette" Orientation="Horizontal" Margin="0,0,12,0"/>
                        <TextBlock Text="Size:" FontSize="11" VerticalAlignment="Center" Margin="0,0,4,0"/>
                        <Slider x:Name="BrushSizeSlider" Width="80" Minimum="1" Maximum="20" Value="3"
                                VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <Button Content="ðŸ—‘ Clear" Padding="8,4" Style="{StaticResource MSNBtn}"
                                Click="ClearCanvas_Click" Margin="0,0,8,0"/>
                        <Button x:Name="SubmitDrawingBtn" Content="âœ“ Submit Drawing" Padding="12,4"
                                Style="{StaticResource MSNBtnPrimary}" Click="SubmitDrawing_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Describe Phase Panel -->
            <Border x:Name="DescribePanel" Background="White" Margin="20" CornerRadius="8" Padding="16" Visibility="Collapsed">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="What do you see in this drawing?" FontSize="14" FontWeight="Bold"
                               Foreground="#4A148C" TextAlignment="Center" Margin="0,0,0,10"/>

                    <!-- Drawing to describe -->
                    <Border Grid.Row="1" BorderBrush="#B088D8" BorderThickness="2" CornerRadius="4"
                            Background="White" ClipToBounds="True">
                        <Image x:Name="DescribeImage" Stretch="Uniform"/>
                    </Border>

                    <!-- Description input -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                        <TextBox x:Name="DescriptionBox" Width="400" Height="32" FontSize="14"
                                 Style="{StaticResource TextBoxStyle}" Margin="0,0,8,0"/>
                        <Button x:Name="SubmitDescriptionBtn" Content="âœ“ Submit" Padding="12,4"
                                Style="{StaticResource MSNBtnPrimary}" Click="SubmitDescription_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Waiting Panel -->
            <Border x:Name="WaitingPanel" Background="White" Margin="20" CornerRadius="8" Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="â³" FontSize="48" TextAlignment="Center"/>
                    <TextBlock Text="Waiting for other players..." FontSize="18" Foreground="#666"
                               TextAlignment="Center" Margin="0,8,0,0"/>
                </StackPanel>
            </Border>

            <!-- Chain Reveal Panel (Gartic Phone style) -->
            <Border x:Name="RevealPanel" Margin="0" Visibility="Collapsed">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#5B2D8E" Offset="0"/>
                        <GradientStop Color="#3A5FC8" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
                <Grid Margin="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"/>     <!-- player list -->
                        <ColumnDefinition Width="*"/>       <!-- chain content -->
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Header -->
                    <TextBlock Grid.ColumnSpan="2" Text="PLAYERS" FontSize="14" FontWeight="Bold"
                               Foreground="#A8D8FF" Margin="4,0,0,6"/>
                    <TextBlock x:Name="RevealTitle" Grid.Column="1" Text="" FontSize="16" FontWeight="Bold"
                               Foreground="White" TextAlignment="Center" Margin="0,0,0,6"/>

                    <!-- Left: Player List -->
                    <Border Grid.Row="1" Grid.Column="0" Background="#00000030" CornerRadius="8"
                            Margin="0,0,12,0" Padding="6">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="RevealPlayerList"/>
                        </ScrollViewer>
                    </Border>

                    <!-- Right: Chain Steps (chat bubbles) -->
                    <ScrollViewer Grid.Row="1" Grid.Column="1" VerticalScrollBarVisibility="Auto"
                                  x:Name="RevealScrollViewer">
                        <StackPanel x:Name="RevealStepsPanel" Margin="0,0,10,0"/>
                    </ScrollViewer>

                    <!-- Bottom: Next Chain button (host only) -->
                    <StackPanel Grid.Row="2" Grid.ColumnSpan="2" Orientation="Horizontal"
                                HorizontalAlignment="Center" Margin="0,10,0,0">
                        <TextBlock x:Name="ChainCountText" Text="" FontSize="12" Foreground="#A8D8FF"
                                   VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <Button x:Name="NextChainBtn" Content="Next Chain â–¶" Padding="20,8" FontSize="14"
                                Style="{StaticResource MSNBtnPrimary}" Click="NextChain_Click"
                                Visibility="Collapsed"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Game Over Panel -->
            <Border x:Name="GameOverPanel" Background="White" Margin="20" CornerRadius="8" Visibility="Collapsed">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="ðŸŽ‰" FontSize="48" TextAlignment="Center"/>
                    <TextBlock x:Name="GameOverText" Text="Game Over! Thanks for playing!" FontSize="20"
                               FontWeight="Bold" Foreground="#4A148C" TextAlignment="Center" Margin="0,8,0,0"/>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>

</Window>
